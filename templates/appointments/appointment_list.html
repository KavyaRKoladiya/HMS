{% extends 'base.html' %}

{% block content %}
<h1>Appointments</h1>

<a class="btn btn-primary mb-3" href="/appointments/add/">Add Appointment</a>

<!-- Filter Dropdown -->
<form method="GET" class="mb-3">
    <select name="doctor" class="form-select" onchange="this.form.submit()">
        <option value="">Filter by Doctor</option>
        {% for doctor in doctors %}
            <option value="{{ doctor.id }}">
                Dr. {{ doctor.first_name }} {{ doctor.last_name }}
            </option>
        {% endfor %}
    </select>
</form>

<hr>

<h3>Upcoming Appointments</h3>
<ul>
    {% for appointment in upcoming_appointments %}
        <li>
            {{ appointment.patient }} with {{ appointment.doctor }}
            on {{ appointment.appointment_date }}
            |
            <a href="/appointments/edit/{{ appointment.id }}/">Edit</a>
            |
            <a href="/appointments/delete/{{ appointment.id }}/">Delete</a>
        </li>
    {% empty %}
        <li>No upcoming appointments.</li>
    {% endfor %}
</ul>

<hr>

<h3>Past Appointments</h3>
<ul>
    {% for appointment in past_appointments %}
        <li>
            {{ appointment.patient }} with {{ appointment.doctor }}
            on {{ appointment.appointment_date }}
            |
            <a href="/appointments/edit/{{ appointment.id }}/">Edit</a>
            |
            <a href="/appointments/delete/{{ appointment.id }}/">Delete</a>
        </li>
    {% empty %}
        <li>No past appointments.</li>
    {% endfor %}
</ul>

{% endblock %}
